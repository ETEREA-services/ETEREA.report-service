sequenceDiagram
    participant Client as Cliente HTTP
    participant Controller as MakeFacturaController
    participant UseCase as GenerateInvoicePdfUseCase
    participant Repository as InvoiceDataRepository
    participant Client as InvoiceDataClient
    participant Service as FacturaPdfService
    participant CoreService as Core Service

    Client->>Controller: POST /make-pdf/{id}
    Controller->>UseCase: generatePdf(clienteMovimientoId)
    
    UseCase->>Repository: findByClienteMovimientoId(clienteMovimientoId)
    Repository->>Client: getInvoiceDataByClienteMovimientoId(clienteMovimientoId)
    Client->>CoreService: HTTP GET /invoice-data/{id}
    CoreService-->>Client: InvoiceData
    Client-->>Repository: InvoiceData
    Repository-->>UseCase: InvoiceData
    
    UseCase->>Service: generatePdf(clienteMovimientoId, invoiceData)
    Service->>Service: Create PDF with iText
    Service-->>UseCase: filename.pdf
    
    UseCase-->>Controller: Resource (PDF)
    Controller-->>Client: ResponseEntity<Resource>

    Note over Client,Service: Flujo completo de generaci√≥n de facturas PDF<br/>usando arquitectura hexagonal

sequenceDiagram
    participant HttpCliente as Cliente HTTP
    participant Controller as MakeFacturaController
    participant UseCase as GenerateInvoicePdfUseCase
    participant Repository as InvoiceDataRepository
    participant DataClient as InvoiceDataClient
    participant Service as FacturaPdfService
    participant CoreService as Core Service

    HttpCliente->>Controller: POST /make-pdf/{id}
    Controller->>UseCase: generatePdf(clienteMovimientoId)
    
    UseCase->>Repository: findByClienteMovimientoId(clienteMovimientoId)
    Repository->>DataClient: getInvoiceDataByClienteMovimientoId(clienteMovimientoId)
    DataClient->>CoreService: HTTP GET /invoice-data/{id}
    CoreService-->>DataClient: InvoiceData
    DataClient-->>Repository: InvoiceData
    Repository-->>UseCase: InvoiceData
    
    UseCase->>Service: generatePdf(clienteMovimientoId, invoiceData)
    Service->>Service: Create PDF with iText
    Service-->>UseCase: filename.pdf
    
    UseCase-->>Controller: Resource (PDF)
    Controller-->>HttpCliente: ResponseEntity<Resource>

    Note over HttpCliente,Service: Flujo completo de generaci√≥n de facturas PDF usando arquitectura hexagonal
